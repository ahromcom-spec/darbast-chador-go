-- مرحله 1: ایجاد جداول برای انواع خدمات و زیرشاخه‌ها
-- این جداول با جداول فعلی service_types_v3 و subcategories کار می‌کنند

-- اضافه کردن انواع خدمات جدید
INSERT INTO public.service_types_v3 (name, code, is_active) VALUES
('داربست فلزی', '01', true),
('چادر برزنتی', '02', true),
('فنس کشی', '03', true),
('ارماتوربندی', '04', true),
('ابزارآلات', '05', true),
('قالی شویی', '06', true)
ON CONFLICT DO NOTHING;

-- اضافه کردن زیرشاخه‌های خدمات
INSERT INTO public.subcategories (service_type_id, name, code, is_active)
SELECT st.id, sub.name, sub.code, true
FROM public.service_types_v3 st
CROSS JOIN (
  VALUES 
    ('داربست فلزی', 'اجراء با نیروهای اهرم و با اجناس، ابزارالات و ماشین آلات اهرم', '01'),
    ('داربست فلزی', 'اجراء با نیروهای اهرم بدون اجناس، ابزارالات و ماشین آلات اهرم', '02'),
    ('داربست فلزی', 'اجراء با نیروهای پیمانکاران و با اجناس، ابزارالات و ماشین آلات اهرم', '03'),
    ('داربست فلزی', 'اجراء با نیروهای پیمانکاران و با اجناس، ابزارالات و ماشین آلات کاربر مشتری یا کارفرما', '04'),
    ('داربست فلزی', 'خرید کالا و اجناس برای اهرم', '05'),
    ('داربست فلزی', 'فروش از کالاها و اجناس اهرم', '06'),
    ('داربست فلزی', 'کرایه دادن اهرم از اجناس یا موارد خدمات مشخص', '07'),
    ('داربست فلزی', 'کرایه گرفتن اهرم از اجناس یا موارد خدمات مشخص', '08'),
    ('داربست فلزی', 'تولید کالای خدمات مشخص', '09'),
    ('داربست فلزی', 'تعمیر', '10'),
    ('داربست فلزی', 'پورسانت واسطه گری اهرم برای پیمانکاران', '11'),
    ('داربست فلزی', 'پورسانت واسطه گری پیمانکاران برای اهرم', '12'),
    ('داربست فلزی', 'تأمین نیرو از طرف اهرم برای پیمانکاران', '13'),
    ('داربست فلزی', 'تأمین نیرو از طرف پیمانکاران برای اهرم', '14'),
    ('چادر برزنتی', 'اجراء با نیروهای اهرم و با اجناس، ابزارالات و ماشین آلات اهرم', '01'),
    ('چادر برزنتی', 'اجراء با نیروهای اهرم بدون اجناس، ابزارالات و ماشین آلات اهرم', '02'),
    ('چادر برزنتی', 'اجراء با نیروهای پیمانکاران و با اجناس، ابزارالات و ماشین آلات اهرم', '03'),
    ('چادر برزنتی', 'اجراء با نیروهای پیمانکاران و با اجناس، ابزارالات و ماشین آلات کاربر مشتری یا کارفرما', '04'),
    ('چادر برزنتی', 'خرید کالا و اجناس برای اهرم', '05'),
    ('چادر برزنتی', 'فروش از کالاها و اجناس اهرم', '06'),
    ('چادر برزنتی', 'کرایه دادن اهرم از اجناس یا موارد خدمات مشخص', '07'),
    ('چادر برزنتی', 'کرایه گرفتن اهرم از اجناس یا موارد خدمات مشخص', '08'),
    ('چادر برزنتی', 'تولید کالای خدمات مشخص', '09'),
    ('چادر برزنتی', 'تعمیر', '10'),
    ('چادر برزنتی', 'پورسانت واسطه گری اهرم برای پیمانکاران', '11'),
    ('چادر برزنتی', 'پورسانت واسطه گری پیمانکاران برای اهرم', '12'),
    ('چادر برزنتی', 'تأمین نیرو از طرف اهرم برای پیمانکاران', '13'),
    ('چادر برزنتی', 'تأمین نیرو از طرف پیمانکاران برای اهرم', '14')
) AS sub(service_type_name, name, code)
WHERE st.name = sub.service_type_name
ON CONFLICT DO NOTHING;

-- اضافه کردن استان‌ها و بخش‌های جدید
INSERT INTO public.provinces (name, code, is_active) VALUES
('قم', '25', true),
('تهران', '08', true),
('البرز', '30', true)
ON CONFLICT DO NOTHING;

-- اضافه کردن بخش‌های قم
INSERT INTO public.districts (province_id, name)
SELECT p.id, d.name
FROM public.provinces p
CROSS JOIN (
  VALUES 
    ('قم', 'شهر قم'),
    ('قم', 'جعفریه'),
    ('قم', 'سلفچگان'),
    ('قم', 'کهک')
) AS d(province_name, name)
WHERE p.name = d.province_name
ON CONFLICT DO NOTHING;

-- اضافه کردن بخش‌های تهران
INSERT INTO public.districts (province_id, name)
SELECT p.id, d.name
FROM public.provinces p
CROSS JOIN (
  VALUES 
    ('تهران', 'تهران'),
    ('تهران', 'ری'),
    ('تهران', 'شمیرانات'),
    ('تهران', 'اسلام‌شهر'),
    ('تهران', 'بهارستان'),
    ('تهران', 'قدس'),
    ('تهران', 'ملارد'),
    ('تهران', 'رباط‌کریم'),
    ('تهران', 'شهریار'),
    ('تهران', 'پردیس'),
    ('تهران', 'دماوند'),
    ('تهران', 'فیروزکوه'),
    ('تهران', 'ورامین'),
    ('تهران', 'پیشوا'),
    ('تهران', 'قرچک'),
    ('تهران', 'پاکدشت')
) AS d(province_name, name)
WHERE p.name = d.province_name
ON CONFLICT DO NOTHING;

-- اضافه کردن بخش‌های البرز
INSERT INTO public.districts (province_id, name)
SELECT p.id, d.name
FROM public.provinces p
CROSS JOIN (
  VALUES 
    ('البرز', 'کرج'),
    ('البرز', 'فردیس'),
    ('البرز', 'ساوجبلاغ'),
    ('البرز', 'نظرآباد'),
    ('البرز', 'اشتهارد'),
    ('البرز', 'چهارباغ'),
    ('البرز', 'طالقان')
) AS d(province_name, name)
WHERE p.name = d.province_name
ON CONFLICT DO NOTHING;